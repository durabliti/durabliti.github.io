<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Online Text Games</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
    margin:0;
    background:#0e0e11;
    color:#fff;
    font-family:monospace;
}
header{
    padding:10px;
    background:#15151c;
    text-align:center;
    font-size:20px;
}
main{
    display:grid;
    grid-template-columns:250px 1fr;
    height:calc(100vh - 40px);
}
aside{
    border-right:1px solid #333;
    padding:10px;
}
section{
    padding:15px;
}
.player{
    padding:6px;
    background:#1c1c28;
    margin-bottom:4px;
}
.game{
    padding:8px;
    background:#222;
    margin-bottom:6px;
    cursor:pointer;
}
.game:hover{background:#333}
.board{
    white-space:pre;
    font-size:20px;
    margin-top:10px;
}
</style>
</head>
<body>

<header>üéÆ Online Text Games</header>

<main>
<aside>
    <b>üë• –û–Ω–ª–∞–π–Ω:</b>
    <div id="players"></div>
    <hr>
    <b>üé≤ –ò–≥—Ä—ã:</b>
    <div class="game" onclick="loadGame('tic')">–ö—Ä–µ—Å—Ç–∏–∫–∏-–Ω–æ–ª–∏–∫–∏</div>
    <div class="game" onclick="loadGame('connect')">–õ–∏–Ω–∏—è 4</div>
    <div class="game" onclick="loadGame('numbers')">–ß–∏—Å–ª–∞ 15</div>
    <div class="game" onclick="loadGame('territory')">–ó–∞—Ö–≤–∞—Ç –ø–æ–ª—è</div>
</aside>

<section>
    <div id="status"></div>
    <div class="board" id="board"></div>
</section>
</main>

<script>
const WS_URL = "wss://–¢–í–û–ô_–î–û–ú–ï–ù"; // ‚Üê –ø–æ–º–µ–Ω—è–π
let ws, myId = null;

const games = {
tic:()=>`
 1 | 2 | 3
---+---+---
 4 | 5 | 6
---+---+---
 7 | 8 | 9
`,
connect:()=>`
[ ][ ][ ][ ]
[ ][ ][ ][ ]
[ ][ ][ ][ ]
[ ][ ][ ][ ]
`,
numbers:()=>`
 1  2  3
 4  5  6
 7  8  9
`,
territory:()=>`
 1 | 2 | 3 | 4
---+---+---+---
 5 | 6 | 7 | 8
---+---+---+---
 9 |10 |11 |12
`
};

function connect(){
    ws=new WebSocket(WS_URL);

    ws.onmessage=e=>{
        const d=JSON.parse(e.data);

        if(d.type==="init"){
            myId=d.id;
            status("–¢—ã –≤ —Å–µ—Ç–∏: "+myId);
        }

        if(d.type==="players"){
            renderPlayers(d.list);
        }
    };
}

function renderPlayers(list){
    const p=document.getElementById("players");
    p.innerHTML="";
    list.forEach(id=>{
        const d=document.createElement("div");
        d.className="player";
        d.textContent=id;
        p.appendChild(d);
    });
}

function loadGame(g){
    document.getElementById("board").textContent=games[g]();
}

function status(t){
    document.getElementById("status").textContent=t;
}

connect();
loadGame("tic");
</script>
</body>
</html>
