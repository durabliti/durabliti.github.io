<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Multiplayer RPC Documentation</title>

<style>
:root {
    --bg: #0f1116;
    --panel: #151823;
    --text: #e6e6e6;
    --accent: #4da6ff;
    --border: #23273a;
    --muted: #9aa0aa;
}

body.light {
    --bg: #f4f6fa;
    --panel: #ffffff;
    --text: #1b1b1b;
    --accent: #005fcc;
    --border: #ddd;
    --muted: #555;
}

body.scp {
    --bg: #0a0a0a;
    --panel: #111;
    --text: #e0e0e0;
    --accent: #c40000;
    --border: #1f1f1f;
    --muted: #777;
}

* {
    box-sizing: border-box;
    font-family: system-ui, Arial, sans-serif;
}

body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    display: flex;
}

/* SIDEBAR */
nav {
    width: 260px;
    background: var(--panel);
    border-right: 1px solid var(--border);
    padding: 20px;
    position: fixed;
    height: 100vh;
}

nav h2 {
    margin-top: 0;
    font-size: 18px;
}

nav a {
    display: block;
    color: var(--text);
    text-decoration: none;
    margin: 10px 0;
    font-size: 14px;
}

nav a:hover {
    color: var(--accent);
}

.theme-switch {
    margin-top: 20px;
}

button {
    background: var(--accent);
    border: none;
    color: #fff;
    padding: 6px 10px;
    cursor: pointer;
    margin: 4px 0;
    width: 100%;
}

/* CONTENT */
main {
    margin-left: 260px;
    padding: 40px;
    max-width: 1000px;
}

section {
    margin-bottom: 60px;
}

h1 {
    font-size: 36px;
}

h2 {
    margin-top: 40px;
    border-bottom: 1px solid var(--border);
    padding-bottom: 6px;
}

h3 {
    margin-top: 20px;
}

p {
    line-height: 1.6;
}

code {
    background: #00000044;
    padding: 3px 6px;
    border-radius: 4px;
}

ul {
    margin-left: 20px;
}

.note {
    background: var(--panel);
    border-left: 4px solid var(--accent);
    padding: 10px;
    margin: 20px 0;
}
</style>
</head>

<body>

<nav>
    <h2>Multiplayer Docs</h2>
    <a href="#intro">Введение</a>
    <a href="#architecture">Архитектура</a>
    <a href="#rpc">RPC система</a>
    <a href="#mirror">Mirror World</a>
    <a href="#sync">Синхронизация</a>
    <a href="#security">Безопасность</a>
    <a href="#examples">Примеры</a>

    <div class="theme-switch">
        <button onclick="setTheme('dark')">Dark</button>
        <button onclick="setTheme('light')">Light</button>
        <button onclick="setTheme('scp')">SCP</button>
    </div>
</nav>

<main>

<section id="intro">
<h1>Universal Multiplayer Documentation</h1>
<p>
Эта документация описывает универсальную систему мультиплеера,
основанную на <b>клиент–серверной архитектуре</b> и <b>RPC</b>.
Она не привязана к конкретному движку или языку.
</p>

<div class="note">
Это не теория ради теории — всё описано так,
как это реально делают в нормальных сетевых играх.
</div>
</section>

<section id="architecture">
<h2>Архитектура</h2>

<h3>Сервер</h3>
<ul>
    <li>Единственный источник истины</li>
    <li>Хранит состояние мира</li>
    <li>Проверяет все действия игроков</li>
</ul>

<h3>Клиент</h3>
<ul>
    <li>Отправляет запросы</li>
    <li>Получает обновления</li>
    <li>Отрисовывает локальную копию мира</li>
</ul>

<p>
Клиенты <b>никогда</b> не меняют мир напрямую.
</p>
</section>

<section id="rpc">
<h2>RPC (Remote Procedure Call)</h2>

<p>
RPC — это вызов функций на удалённой стороне.
Игрок не «двигается», он <i>просит сервер</i> выполнить действие.
</p>

<h3>Client → Server</h3>
<ul>
    <li><code>RPC_Move(direction)</code></li>
    <li><code>RPC_Action(type)</code></li>
    <li><code>RPC_Interact(objectId)</code></li>
</ul>

<h3>Server → Client</h3>
<ul>
    <li><code>RPC_Spawn(entity)</code></li>
    <li><code>RPC_StateUpdate(snapshot)</code></li>
    <li><code>RPC_Despawn(id)</code></li>
</ul>

<div class="note">
Если сервер не подтвердил RPC — действия не существует.
</div>
</section>

<section id="mirror">
<h2>Mirror World</h2>

<p>
Mirror World — это зеркальная версия мира,
используемая для эффектов, альтернативных измерений или режимов.
</p>

<ul>
    <li>Зеркалирование по оси X или Z</li>
    <li>Отражённые позиции</li>
    <li>Отдельные правила взаимодействия</li>
</ul>

<p>
Сервер хранит оригинальное состояние,
а клиенту отправляет уже преобразованные координаты.
</p>
</section>

<section id="sync">
<h2>Синхронизация</h2>

<p>
Сервер регулярно отправляет снапшоты:
</p>

<ul>
    <li>Позиции</li>
    <li>Повороты</li>
    <li>Состояния</li>
    <li>Анимации</li>
</ul>

<p>
Клиент применяет интерполяцию,
чтобы скрыть задержки сети.
</p>
</section>

<section id="security">
<h2>Безопасность</h2>

<ul>
    <li>Валидация всех RPC</li>
    <li>Анти-спам RPC</li>
    <li>Проверка расстояний и состояний</li>
</ul>

<div class="note">
Если логика на клиенте — это не защита.
</div>
</section>

<section id="examples">
<h2>Практика</h2>

<p>
Подходит для:
</p>

<ul>
    <li>SCP-подобных игр</li>
    <li>Кооперативов</li>
    <li>PvP</li>
    <li>Экспериментальных режимов</li>
</ul>

<p>
Эта модель масштабируется от 2 до сотен игроков.
</p>
</section>

</main>

<script>
function setTheme(theme) {
    document.body.className = '';
    if (theme !== 'dark') {
        document.body.classList.add(theme);
    }
}
</script>

</body>
</html>
